{% import "partials/rating.njk" as elRating %}

{% macro infoImage(oldPrice, new, imagesProduct, item.path) %}
    <div class="w-[54%]">
        <div>
            <div class="relative">
                <img class="w-full max-h-[524px] object-cover" src="/images/image/oval-mirror.jpeg" alt="#">
                {% if oldPrice %}
                    <button class="absolute top-7 left-0 flex items-center justify-center transition-all duration-500 bg-red-700 rounded-tr rounded-br w-[52px] h-[22px] sm:w-24 sm:h-8">
                        <p class="text-sm text-gray-100 md:text-base">Sale</p>
                    </button>
                {% elif new %}
                    <button class="absolute top-7 left-0 flex items-center justify-center transition-all duration-500 bg-green-900 rounded-tr rounded-br w-[52px] h-[22px] sm:w-24 sm:h-8">
                        <p class="text-sm text-gray-100 md:text-base">New</p>
                    </button>
                {% endif %}
            </div> 
            <div class="flex h-24 mt-4 overflow-hidden">
                {% for item in imagesProduct %}
                    <img class="object-cover w-24 mr-4" src="{{ item.path }}" alt="#">
                {% endfor %}
            </div>
        </div>
    </div>
{% endmacro %}

{% macro infoGeneral(name, averageRating, rating, reviews.length, price, oldPrice, colors, item.color, item.name, item.favorites) %}
    <div class="w-[40%]">
        <h1 class="text-3xl font-medium uppercase">{{ name }}</h1>
        <div class="flex mt-3 space-x-4"> 
            {{ elRating.rating(averageRating) }}
            <div class="grid grid-flow-col text-gray-600 gap-x-4">
                <p>({{ averageRating }})</p>
                <p class="underline">{{ rating }} ratings</p>
                <p class="underline">{{ reviews.length }} reviews</p>
            </div>
        </div>
        <div class="grid grid-flow-col text-3xl mt-7 w-max gap-x-4">
            <p class="text-gray-900">€{{ price }}</p>
            <p class="text-gray-600">€{{ oldPrice }}</p>
        </div>
        <div class="mt-7">
            <p class="font-medium text-gray-900">Colors</p>
            <div class="grid grid-flow-col mt-2 w-max gap-x-2">
                {% for item in colors %}
                    <label class="relative text-center w-max group">
                        <input class="appearance-none sr-only peer" type="checkbox">
                        <span style="background-image: url('{{ item.color }}'); background-size: cover;" class="flex items-center justify-center text-transparent transition-all rounded cursor-pointer peer-focus-visible:outline-2 peer-focus-visible:outline-offset-2 peer-focus-visible:outline peer-focus-visible:outline-blue-800 group-hover:shadow-md h-9 w-9 ring-gray-300 peer-checked:text-white">
                            <svg class="w-6 h-6">
                                <use xlink:href="/images/all-icons.svg#check-mark"></use>
                            </svg>
                        </span>
                        <p class="mt-1 text-gray-600 peer-checked:text-gray-900">{{ item.name }}</p>
                    </label>
                {% endfor %}
            </div>
        </div>
        <div class="grid grid-flow-col mt-12 gap-x-2 w-max">
            <button class="flex items-center justify-center bg-gray-200 rounded-sm w-9 h-9">
                <svg class="w-6 h-6 text-gray-600">
                    <use xlink:href="/images/all-icons.svg#minus"></use>
                </svg>
            </button>
            <label class="relative text-center w-max group">
                <input type="number" step="1" min="1" value="1" class="text-center border border-gray-300 rounded-sm peer w-9 h-9">
            </label>
            <button class="flex items-center justify-center bg-blue-800 rounded-sm w-9 h-9">
                <svg class="w-6 h-6 text-white">
                    <use xlink:href="/images/all-icons.svg#plus"></use>
                </svg>
            </button>
        </div>
        <div class="grid grid-flow-col mt-10 w-max gap-x-2">
            <button class="relative flex items-center justify-center h-12 text-white transition-colors duration-300 bg-blue-800 rounded outline-none hover:bg-blue-700 focus:outline focus:outline-blue-800 active:bg-blue-900 focus:outline-offset-1 w-60">
                <a href="#" class="before:absolute before:inset-0">Add to cart</a>
            </button>
            <button 
            x-data="{ favorites : {{ item.favorites }} }" 
            @click="favorites = !favorites"
            class="flex items-center justify-center w-12 h-12 transition-all duration-500 rounded bg-gray-400/40">
                <svg :class="{'text-red-800' : favorites, 'text-white' : !favorites}"
                class="{% if item.favorites %}text-red-800{% else %}text-white{% endif %} transition-all" width="20" height="17"  style="fill:transparent" :style="favorites ? { fill: 'currentColor' } : { fill: 'transparent' }" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.318 2.318a4.5 4.5 0 0 0 0 6.364L10 16.364l7.682-7.682a4.5 4.5 0 1 0-6.364-6.364L10 3.636 8.682 2.318a4.5 4.5 0 0 0-6.364 0v0Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>
{% endmacro %}

{% macro infoMaterials(height, width, depth, weight, materials, item.nameMaterial, item.percentageMaterial) %}
    <div class="relative w-[54%] py-3 text-gray-900 mt-7">
    <div class="flex w-full pb-3 text-xl border-b-2 border-gray-200 space-x-11">
    <button>
        <h2 class="font-medium" >Details</h2>
    </button>
    <button>
        <h2 class="font-medium" >Shipping & Returns</h2>
    </button>
    </div>
    <div class="flex justify-between w-full mt-5">
    <div class="w-[44%]">
        <h3 class="font-medium text-gray-900">Product measurements:</h3>
        <div class="flex mt-2 space-x-3">
            <ul class="grid text-gray-600 gap-y-2">
                <li>
                    <p>Height</p>
                </li>
                <li>
                    <p>Width</p>
                </li>
                <li>
                    <p>Depth</p>
                </li>
                <li>
                    <p>Weight</p>
                </li>
            </ul>
            <ul class="grid text-gray-900 gap-y-2">
                <li>
                    <p>{{ height }} cm</p>
                </li>
                <li>
                    <p>{{ width }} cm</p>
                </li>
                <li>
                    <p>{{ depth }} cm</p>
                </li>
                <li>
                    <p>{{ weight }} kg</p>
                </li>
            </ul>
        </div>
    </div>
    <div class="w-[30%]">
        <h3 class="font-medium text-gray-900">Materials:</h3>
        <div class="mt-2">
            <ul class="text-gray-600">
                {% for item in materials %}
                    <li class="grid grid-cols-2 gap-x-3 w-max">
                        <p>{{ item.nameMaterial }}</p>
                        <p class="text-gray-900">{{ item.percentageMaterial }}%</p>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    </div>
    </div>
{% endmacro %}